# 数据库面试题

1. Redis可以用来做什么？Redis高并发下可能存在哪些问题？



2. 如何解决幻读？具体原理？
参考博客：https://cloud.tencent.com/developer/article/1450773
 - 脏读：A事务立即读取了B事务尚未提交的脏数据。B事务回滚数据恢复正常，但A事务带着脏数据继续执行。
 - 不可重复读：A事务两次重复读取的数据不一致。A事务耗时较长，而B事务中途更改了该数据，导致内容发生改变。
 - 幻读：A事务两次重复读取的数据总量增加。A事务耗时较长，而B事务中途新增了数据，导致总量增加。

数据库事务四大特性：ACID (atomicity, consistency, isolation & durability)
 - 原子性：事务所包含的数据库操作要么全部成功，要么全部回滚
 - 一致性：一个事务执行之前和执行之后都必须处于一致性状态
 - 隔离性：一个事务未提交的业务结果是否对于其它事务可见，有不同的隔离级别
 - 持久性：事务提交是永久操作

数据库隔离级别
- read_uncommit：均不可解决
  * 公司发工资了，领导把5000元打到singo的账号上，但是该事务并未提交，而singo正好去查看账户，发现工资已经到账，是5000元整，非常高 兴。可是不幸的是，领导发现发给singo的工资金额不对，是2000元，于是迅速回滚了事务，修改金额后，将事务提交，最后singo实际的工资只有 2000元，singo空欢喜一场。
- read_commit：可解决脏读
  * singo拿着工资卡去消费，系统读取到卡里确实有2000元，而此时她的老婆也正好在网上转账，把singo工资卡的2000元转到另一账户，并在 singo之前提交了事务，当singo扣款时，系统检查到singo的工资卡已经没有钱，扣款失败，singo十分纳闷，明明卡里有钱，为何......
- read_repeatable：可解决脏读、不可重复读
  * singo的老婆工作在银行部门，她时常通过银行内部系统查看singo的信用卡消费记录。有一天，她正在查询到singo当月信用卡的总消费金额 （select sum(amount) from transaction where month = 本月）为80元，而singo此时正好在外面胡吃海塞后在收银台买单，消费1000元，即新增了一条1000元的消费记录（insert transaction ... ），并提交了事务，随后singo的老婆将singo当月信用卡消费的明细打印到A4纸上，却发现消费总额为1080元，singo的老婆很诧异，以为出 现了幻觉，幻读就这样产生了。
- serializable：可解决脏读、不可重复读、幻读
  * 事务顺序执行，但性能低，很少使用
