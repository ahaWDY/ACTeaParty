# 分布式及多线程面试题

1. 如何设计一个线程池？

关于线程的面试题：https://juejin.cn/post/6968721240592744455

线程池具体实现：https://zhuanlan.zhihu.com/p/356564167

线程创建和销毁的开销是很大的，需要为其分配内存，将其加入调度队列由操作系统进行调度。而线程池的目的就是减少线程的频繁创建和销毁，维持一定合理数量的线程，“需要时取，用完时还”。

线程池的基本思想为：生产者-消费者模型。使用两个链表分别表示生产者（待处理的工作任务Jobs）和消费者（包括所有线程Threads），并通过一些同步原语来协调二者之间的工作。

线程池初始化时，会创建一定数量的线程并放入Threads链表中，每个线程处理函数开启一个死循环，通过条件变量等待信号的到来；当有新的任务到来时，会加入Jobs中，并同时通过信号唤醒线程处理相应任务。

2. 并行和并发有什么区别？

参考博客：https://cloud.tencent.com/developer/article/1424249

并发（Concurrent），在操作系统中，是指一个时间段中有几个程序都处于已启动运行到运行完毕之间，且这几个程序都是在同一个处理机上运行

并行（Parallel），当系统有一个以上CPU时，当一个CPU执行一个进程时，另一个CPU可以执行另一个进程，两个进程互不抢占CPU资源，可以同时进行，这种方式我们称之为并行(Parallel)。

这里面有一个很重要的点，那就是系统要有多个CPU才会出现并行。在有多个CPU的情况下，才会出现真正意义上的『同时进行』。

并发，指的是多个事情，在同一时间段内同时发生了。   并行，指的是多个事情，在同一时间点上同时发生了。

并发的多个任务之间是互相抢占资源的。   并行的多个任务之间是不互相抢占资源的、

只有在多CPU的情况中，才会发生并行。否则，看似同时发生的事情，其实都是并发执行的。


3. 在 java 程序中怎么保证多线程的运行安全？

4. 说一下 synchronized 底层实现原理？
